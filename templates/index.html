<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <style>
        :root {
            --primary-color: #1DB954;
            --bg-color: #121212;
            --text-color: #FFFFFF;
            --secondary-bg: #282828;
            --hover-bg: #404040;
            --button-hover: #1ed760;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: grid;
            grid-template-rows: 1fr auto;
        }

        .main-container {
        display: grid;
        grid-template-columns: 300px minmax(0, 1fr) 300px;
        overflow: hidden;
    }

    .sidebar {
    background: linear-gradient(to bottom, #333, #444);
    border-radius: 15px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    padding: 20px;
    margin: 15px;
    height: calc(85vh - 30px); /* Account for margins */
    overflow-y: auto;
    position: sticky; /* Keeps the sidebar in place during scrolling */
    top: 0; /* Sticks the sidebar to the top of the viewport */
    overflow-y: auto; /* Enables scrolling for the sidebar content */

}
.logo {
    color: var(--primary-color);
    font-size: 1.5em;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--secondary-bg);
}

        .content {
            background: linear-gradient(to bottom, #404040, var(--bg-color));
            padding: 20px;
            overflow-y: auto;
        }
/* Update song list styling */
.song-list {
    list-style: none;
    margin-top: 15px;
    padding-right: 10px; /* Add space for scrollbar */
}

.song-item {
    padding: 15px;
    margin-bottom: 12px;
    background-color: var(--secondary-bg);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.song-item:hover {
    background-color: var(--hover-bg);
    transform: translateX(5px);
}

.song-item.active {
    background-color: var(--primary-color);
    color: var(--bg-color);
}

.song-item.active .song-artist {
    color: rgba(0, 0, 0, 0.7);
}

/* Scrollbar styling */
.sidebar::-webkit-scrollbar {
    width: 8px;
}

.sidebar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
}

.sidebar::-webkit-scrollbar-thumb {
    background: var(--primary-color);
    border-radius: 4px;
}

.sidebar::-webkit-scrollbar-thumb:hover {
    background: var(--button-hover);
}

        .song-art {
            width: 40px;
            height: 40px;
            background-color: var(--secondary-bg);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .song-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 4px;
        }

        .song-info {
            flex: 1;
        }

        .song-title {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .song-artist {
            font-size: 0.85em;
            color: #b3b3b3;
        }

        .player-bar {
            background-color: #181818;
            border-top: 1px solid #282828;
            padding: 16px 24px;
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            align-items: center;
            gap: 20px;
            
        }

        .now-playing {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .player-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .control-buttons {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 8px;
        }

        .control-button {
            background: none;
            border: none;
            color: #b3b3b3;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .control-button:hover {
            color: var(--text-color);
        }

        .play-pause {
            background-color: var(--text-color);
            color: var(--bg-color);
            width: 40px;
            height: 40px;
        }

        .play-pause:hover {
            transform: scale(1.1);
            background-color: var(--text-color);
        }

        

        .player-container {
            width: 100%;
            aspect-ratio: 16 / 9;
            max-height: 70vh;
            background-color: var(--bg-color);
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
        }

        .player-container iframe,
        .player-container video,
        .player-container audio {
            width: 100%;
            height: 100%;
            border: none;
        }

        .error-message {
            color: #ff4444;
            padding: 10px;
            text-align: center;
            background-color: rgba(255, 68, 68, 0.1);
            border-radius: 4px;
            margin-top: 16px;
        }

        .lyrics-header {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--secondary-bg);
    }

    .lyrics-title {
        color: var(--text-color);
        font-size: 18px;
        font-weight: bold;
    }

    .lyrics-subtitle {
        color: var(--primary-color);
        font-size: 14px;
    }

    .lyrics-content {
        white-space: pre-line;
        color: #b3b3b3;
        font-size: 14px;
        line-height: 1.6;
        padding: 16px 0;
    }

    .lyrics-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 200px;
        color: #b3b3b3;
        text-align: center;
        gap: 12px;
    }

    .lyrics-loading {
        color: var(--primary-color);
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .lyrics-error {
        color: #ff4444;
        padding: 16px;
        text-align: center;
        background-color: rgba(255, 68, 68, 0.1);
        border-radius: 4px;
    }

    
    @media (max-width: 1200px) {
        .main-container {
        grid-template-columns: minmax(300px, 1fr) 1fr;
    }
        .lyrics-panel {
            display: none;
        }
    }

    /* Loading spinner animation */
    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid var(--primary-color);
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 8px;
        vertical-align: middle;
    }

        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                display: none;
            }

            .player-bar {
                grid-template-columns: 1fr;
                gap: 16px;
            }
        }

        .right-side-container {
            padding: 20px;
            background-color: var(--secondary-bg);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Curved Weather Card */
        #weather {
            max-height: 300px;
            overflow-y: auto;
            padding: 20px;
            background: linear-gradient(to bottom, #333, #444);
            border-radius: 15px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            color: #fff;
            margin: 15px 0;
        }

        #weather h3 {
            font-size: 1.5em;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        #weather p {
            font-size: 1em;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        #weather-info, #snowfall-info, #rain-chance-info, #time-info, #date-info {
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
        }
        #news {
    padding: 20px;
    background: linear-gradient(to bottom, #333, #444);
    border-radius: 15px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    color: #fff;
    margin-top: 20px;
    /* Make the entire container look like a card */
}

#news h3 {
    font-size: 1.5em;
    color: var(--primary-color);
    margin-bottom: 10px;
    display: inline-block; /* Fix the title position */
}

.refresh-btn {
    padding: 10px;
    background-color: var(--primary-color);
    color: var(--bg-color);
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    margin-top: 10px;
    display: inline-block; /* Fix the button position */
}

/* Hover effect for refresh button */
.refresh-btn:hover {
    background-color: var(--button-hover);
}

/* News container with scrolling */
.news-container {
    margin-top: 15px;
    max-height: 300px;  /* Limit the height of the scrollable area */
    overflow-y: auto;   /* Allow scrolling for the news items */
}

.news-item {
    padding: 15px;
    margin-bottom: 12px;
    background-color: var(--secondary-bg);
    border-radius: 8px;
    transition: all 0.2s ease;
    border-left: 3px solid var(--primary-color);
}

.news-item:hover {
    transform: translateX(5px);
    background-color: var(--hover-bg);
}
.news-item h4 {
    margin-bottom: 8px;
    line-height: 1.4;
}

.news-item p {
    font-size: 1em;
    color: #bbb;
}

.news-item a {
    color: var(--text-color);
    text-decoration: none;
    transition: color 0.2s ease;
}

.news-item a:hover {
    color: var(--primary-color);
}

.news-date {
    margin-bottom: 8px;
    font-size: 0.8em;
    color: #666;
}

.news-source {
    margin-top: 8px;
    font-size: 0.9em;
    color: var(--primary-color);
}

/* Disabled button state */
.refresh-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    background-color: var(--secondary-bg);
}

/* Category selector styling */
.category-select {
    padding: 8px;
    border-radius: 4px;
    background: var(--secondary-bg);
    color: var(--text-color);
    border: 1px solid var(--primary-color);
    margin-right: 10px;
    cursor: pointer;
}

.category-select:hover {
    border-color: var(--button-hover);
}

.category-select:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(29, 185, 84, 0.3);
}

/*.volume-controls {
    position: absolute;
    bottom: 20px;
    right: 20px;  Moves the container to the left 
    display: flex;
    align-items: center;
    justify-content: flex-start;  Aligns items (icon and slider) to the left 
    gap: 8px;
}


        .volume-slider {
            width: 100px;
            height: 5px;
            -webkit-appearance: none;
            background: #404040;
            border-radius: 2.5px;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
        }

        .volume-icon {
            width: 24px;
            height: 24px;
        }*/
.search-container {
    padding: 0 15px 15px 15px;
    position: sticky; /* Makes the container fixed during scrolling */
    top: 0; /* Sticks the container to the top of its parent */
    z-index: 10; /* Ensures it stays on top of the scrolling content */
    background-color: linear-gradient(to bottom, #333, #444); /* Optional: Matches the sidebar's background */
    border-bottom: 1px solid var(--secondary-bg); /* Optional: Adds a bottom separator */
}
      

.search-input {
    width: 100%;
    padding: 8px 12px;
    border: none;
    border-radius: 8px;
    background-color: var(--secondary-bg);
    color: var(--text-color);
    font-size: 14px;
    transition: all 0.2s ease;
}

.search-input:focus {
    outline: none;
    background-color: var(--hover-bg);
    box-shadow: 0 0 0 2px var(--primary-color);
}

.song-item {
    visibility: visible;
    opacity: 1;
    transition: visibility 0.3s, opacity 0.3s;
}

.song-item.hidden {
    display: none;
    visibility: hidden;
    opacity: 0;
    height: 0;
    margin: 0;
    padding: 0;
}
.song-list {
    scroll-behavior: smooth;
}

/*.volume-controls {
    position: absolute;
    bottom: 20px;
    right: 20px;  Moves the container to the left 
    display: flex;
    align-items: center;
    justify-content: flex-start;  Aligns items (icon and slider) to the left 
    gap: 8px;
}


        .volume-slider {
            width: 100px;
            height: 5px;
            -webkit-appearance: none;
            background: #404040;
            border-radius: 2.5px;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
        }

        .volume-icon {
            width: 24px;
            height: 24px;
        }*/
        /* Spotify search results styling */
        #spotifySearchResults {
            max-height: 300px;
            overflow-y: auto;
            background-color: #f4f4f4;
            border-radius: 8px;
            padding: 10px;
        }
        .spotify-track {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .spotify-track:hover {
            background-color: #e0e0e0;
        }
        .spotify-track img {
            width: 50px;
            height: 50px;
            margin-right: 10px;
            object-fit: cover;
        }
        .spotify-track-info {
            flex-grow: 1;
        }
 
</style>
</head>
<body>
    <div class="main-container">
        <div class="sidebar">
            <div class="logo">My Library</div>
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="Search songs...">
                <input type="text" id="spotifySearchInput" class="search-input" placeholder="Search songs on Spotify">
                
            </div>
            <ul id="songList" class="song-list"></ul>
            
        </div>

        <div class="content">
            <div id="currentTrackInfo"></div>
            <div id="playerContainer" class="player-container"></div>
            <div id="errorMessage" class="error-message"></div>
        </div>

        <div class="right-side-container">
            <!-- Weather container -->
            <div id="weather" class="weather-container">
                <h3>Weather</h3>
                <p id="weather-info">Loading weather data...</p>
                <p id="snowfall-info"></p>
                <p id="rain-chance-info"></p>
                <p id="time-info"></p>
                <p id="date-info"></p>
            </div>

            <div id="news">
                <!-- Fixed title -->
                <h3>Latest News</h3>
                <!-- Fixed refresh button -->
                <button id="refreshNews" class="refresh-btn" onclick="refreshNews()">Refresh News</button>
            
                <!-- Scrollable container for news items -->
                <div id="newsInfo" class="news-container"></div>
            </div>
            
        </div>
    </div>

    <div class="player-bar">
        <div class="now-playing">
            <div class="song-art">
                <img id="nowPlayingImage" src="https://img.youtube.com/vi/default.jpg" alt="Video Thumbnail" class="song-artwork">
            </div>
            
            <div class="song-info">
                <div class="song-title" id="nowPlayingTitle">Select a song</div>
                <div class="song-artist" id="nowPlayingArtist"></div>
            </div>
        </div>
        <div class="player-controls" style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
            <div id="progressBarContainer" style="width: 100%; height: 5px; background-color: #404040; position: relative;">
                <div id="progressBar" style="width: 0%; height: 100%; background-color: var(--primary-color);"></div>
            </div>
        <div class="player-controls">
            <div class="control-buttons">
                <button class="control-button" id="previousButton" title="Previous">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 20L9 12l10-8v16z"></path>
                        <line x1="5" y1="19" x2="5" y2="5"></line>
                    </svg>
                </button>
                <button class="control-button play-pause" id="playPauseButton" title="Play/Pause">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="black" stroke="currentColor" stroke-width="2" id="playPauseIcon">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                </button>
                <button class="control-button" id="nextButton" title="Next">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 4l10 8-10 8V4z"></path>
                        <line x1="19" y1="5" x2="19" y2="19"></line>
                    </svg>
                </button>        
            </div>
        </div>
         
        <!--
        <div class="volume-controls">
            <img class="volume-icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIj48cG9seWdvbiBwb2ludHM9IjExIDUgNiA5IDIgOSAyIDE1IDYgMTUgMTEgMTkgMTEgNSI+PC9wb2x5Z29uPjxwYXRoIGQ9Ik0xOS4wNyA0LjkzYTEwIDEwIDAgMCAxIDAgMTQuMTRNMTUuNTQgOC40NmE1IDUgMCAwIDEgMCA3LjA3Ij48L3BhdGg+PC9zdmc+" alt="Volume">
            <input type="range" class="volume-slider" min="0" max="100" value="100">
        </div>
        -->
    </div>

    <script>
        // Spotify Search and Playback Class
class SpotifySearch {
    constructor() {
        // Configuration and API credentials
        this.clientId = '9ec48c569aae4f41a59d755b3cd410ab';
        this.clientSecret = '023ddf0550074b999e3223661098e3ca';

        // DOM Element References
        this.searchInput = document.getElementById('spotifySearchInput');
        this.searchResults = document.getElementById('spotifySearchResults');
        
        // Player Controls
        this.playPauseIcon = document.getElementById('playPauseIcon');
        this.progressBar = document.getElementById('progressBar');
        this.progressBarContainer = document.getElementById('progressBarContainer');

        // Now Playing Elements
        this.nowPlayingTitle = document.getElementById('nowPlayingTitle');
        this.nowPlayingArtist = document.getElementById('nowPlayingArtist');
        this.nowPlayingImage = document.getElementById('nowPlayingImage');

        // Audio Player
        this.audio = new Audio();
        this.currentTrack = null;
        this.accessToken = null;
        this.tokenExpiration = 0;

        // Initialize event listeners and setup
        this.initEventListeners();
    }

    initEventListeners() {
        // Debounced search input
        this.searchInput.addEventListener('input', this.debounce(async (e) => {
            const query = e.target.value.trim();
            if (query.length > 2) {
                await this.searchSpotifySongs(query);
            }
        }, 300));

        // Play/Pause Toggle
        this.playPauseIcon.addEventListener('click', () => this.togglePlayPause());

        // Progress Bar Interaction
        this.progressBarContainer.addEventListener('click', (e) => this.seekTrack(e));

        // Audio Event Listeners
        this.audio.addEventListener('timeupdate', () => this.updateProgressBar());
        this.audio.addEventListener('ended', () => this.resetPlayback());
    }

    // Debounce utility to prevent excessive API calls
    debounce(func, delay) {
        let timeoutId;
        return function() {
            const context = this;
            const args = arguments;
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => func.apply(context, args), delay);
        };
    }

    // Get Spotify Access Token
    async getAccessToken() {
        // Check if current token is valid
        if (this.accessToken && Date.now() < this.tokenExpiration) {
            return this.accessToken;
        }

        // Encode client credentials
        const credentials = btoa(`${this.clientId}:${this.clientSecret}`);

        try {
            const response = await fetch('https://accounts.spotify.com/api/token', {
                method: 'POST',
                headers: {
                    'Authorization': `Basic ${credentials}`,
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: 'grant_type=client_credentials'
            });

            if (!response.ok) {
                throw new Error('Failed to get access token');
            }

            const data = await response.json();
            this.accessToken = data.access_token;
            this.tokenExpiration = Date.now() + (data.expires_in * 1000);
            return this.accessToken;
        } catch (error) {
            console.error('Spotify Token Error:', error);
            this.searchResults.innerHTML = '<p>Error connecting to Spotify</p>';
            return null;
        }
    }

    // Search Spotify Songs
    async searchSpotifySongs(query) {
        try {
            const token = await this.getAccessToken();
            if (!token) return;

            const response = await fetch(`https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=10`, {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });

            if (!response.ok) {
                throw new Error('Search failed');
            }

            const data = await response.json();
            this.displaySearchResults(data.tracks.items);
        } catch (error) {
            console.error('Spotify Search Error:', error);
            this.searchResults.innerHTML = '<p>Error searching songs</p>';
        }
    }

    // Display Search Results
    displaySearchResults(tracks) {
        this.searchResults.innerHTML = tracks.map(track => `
            <div class="spotify-track" 
                 data-preview="${track.preview_url || ''}" 
                 data-name="${track.name}"
                 data-artist="${track.artists.map(artist => artist.name).join(', ')}"
                 data-image="${track.album.images[0]?.url || 'placeholder.jpg'}">
                <img src="${track.album.images[0]?.url || 'placeholder.jpg'}" alt="Album Cover">
                <div class="spotify-track-info">
                    <h3>${track.name}</h3>
                    <p>${track.artists.map(artist => artist.name).join(', ')}</p>
                </div>
            </div>
        `).join('');

        // Add click event to track elements
        this.searchResults.querySelectorAll('.spotify-track').forEach(trackElement => {
            trackElement.addEventListener('click', () => this.playSong(trackElement));
        });
    }

    // Play Selected Song
    playSong(trackElement) {
        const previewUrl = trackElement.dataset.preview;
        const trackName = trackElement.dataset.name;
        const artistName = trackElement.dataset.artist;
        const trackImage = trackElement.dataset.image;

        if (previewUrl) {
            // Set current track details
            this.currentTrack = {
                preview: previewUrl,
                name: trackName,
                artist: artistName,
                image: trackImage
            };

            // Play the track
            this.audio.src = previewUrl;
            this.audio.play();

            // Update UI
            this.updateNowPlaying(trackName, artistName, trackImage);
            this.updatePlayPauseIcon(true);
            this.createBackgroundGradient(trackImage);
        } else {
            alert('No preview available for this track');
        }
    }

    // Toggle Play/Pause
    togglePlayPause() {
        if (this.audio.paused) {
            this.audio.play();
            this.updatePlayPauseIcon(true);
        } else {
            this.audio.pause();
            this.updatePlayPauseIcon(false);
        }
    }

    // Seek Track on Progress Bar Click
    seekTrack(e) {
        if (!this.audio.duration) return;

        const clickPosition = e.offsetX / this.progressBarContainer.offsetWidth;
        this.audio.currentTime = clickPosition * this.audio.duration;
    }

    // Update Now Playing Information
    updateNowPlaying(trackName, artistName, trackImage) {
        this.nowPlayingTitle.textContent = trackName;
        this.nowPlayingArtist.textContent = artistName;
        this.nowPlayingImage.src = trackImage;
    }

    // Update Play/Pause Icon
    updatePlayPauseIcon(isPlaying) {
        this.playPauseIcon.innerHTML = isPlaying 
            ? `<path d="M6 4h4v16H6zm8 0h4v16h-4z" fill="currentColor"/>` 
            : `<polygon points="5 3 19 12 5 21 5 3" fill="currentColor"/>`;
    }

    // Update Progress Bar
    updateProgressBar() {
        if (this.audio.duration) {
            const progress = (this.audio.currentTime / this.audio.duration) * 100;
            this.progressBar.style.width = `${progress}%`;
        }
    }

    // Reset Playback
    resetPlayback() {
        this.audio.currentTime = 0;
        this.updatePlayPauseIcon(false);
        this.progressBar.style.width = '0%';
    }

    // Create Background Gradient
    createBackgroundGradient(imageUrl) {
        const gradientContainer = document.createElement('div');
        gradientContainer.id = 'backgroundGradient';
        gradientContainer.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                135deg, 
                rgba(0,0,0,0.7) 0%, 
                rgba(100,100,200,0.5) 100%
            );
            z-index: -1;
            filter: blur(50px);
            opacity: 0.7;
            transition: background 0.5s ease;
        `;

        // Remove existing gradient
        const existingGradient = document.getElementById('backgroundGradient');
        if (existingGradient) {
            existingGradient.remove();
        }

        document.body.appendChild(gradientContainer);
    }
}

// Lyrics Fetching (Placeholder - Requires external API)
class LyricsFetcher {
    static async fetchLyrics(trackName, artistName) {
        try {
            // Placeholder for lyrics API integration
            const lyricsContainer = document.getElementById('lyricsContainer') || document.createElement('div');
            lyricsContainer.id = 'lyricsContainer';
            lyricsContainer.innerHTML = `
                <div class="lyrics-header">
                    <h2>${trackName}</h2>
                    <p>${artistName}</p>
                </div>
                <div class="lyrics-content">
                    <p>Lyrics loading...</p>
                    <small>Lyrics API integration required</small>
                </div>
            `;
            
            // Append or replace lyrics container
            const playerContainer = document.getElementById('playerContainer');
            if (playerContainer) {
                playerContainer.appendChild(lyricsContainer);
            }
        } catch (error) {
            console.error('Lyrics Fetch Error:', error);
        }
    }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    // Create Spotify Search instance
    const spotifySearch = new SpotifySearch();
});
    </script>
</body>
</html>
